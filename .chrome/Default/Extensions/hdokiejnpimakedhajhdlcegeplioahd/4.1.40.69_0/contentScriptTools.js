LPContentScriptTools=function(){var m=function(){return function(a,c){var b=document.createElement("img");b.src=a;b.addEventListener("load",function(){var a;a="";try{var f=document.createElement("canvas");f.height=b.clientHeight;f.width=b.clientWidth;f.getContext("2d").drawImage(b,0,0);a=f.toDataURL()}catch(g){}document.body.removeChild(b);c(a)});b.addEventListener("error",function(){c("");document.body.removeChild(b)});document.body.appendChild(b)}}(),k=function(){return function(a){var c=[];if(a.searches){a.searches=
[].concat(a.searches);for(var b=document.createTreeWalker(document.body,NodeFilter.SHOW_TEXT);b.nextNode();){var d;a:{d=b.currentNode;if(d.parentElement)switch(d.parentElement.nodeName){case "SCRIPT":d=!1;break a}d=!0}if(d){a:{d=a;for(var f=b.currentNode.nodeValue.trim(),g=null,e=0;e<d.searches.length;++e){var h=d.searches[e];if(d.exactMatch){if(f===h){d=h;break a}}else-1<f.indexOf(h)&&(null===g||h.length>g.length)&&(g=h)}d=g}if(d&&(c.push({parent:b.currentNode.parentElement,match:d,matchingText:b.currentNode.nodeValue.trim()}),
!a.searchAll))break}}}return a.searchAll?c:c[0]}}(),n=function(){var a=!1;window.addEventListener("beforeunload",function(c){!1!==c.isTrusted&&(a=!0)});return function(){return a}}(),l=function(a){return"FORM"===a.nodeName},p=function(){var a=[function(a){if(a.getAttribute("id"))return $('label[for="'+a.getAttribute("id")+'"]').text()},function(a){return $(a).closest("label").text()},function(a){return a.getAttribute("placeholder")},function(a){for(;a;){var b=a.textContent;if(b){a=b.split("\n").map(function(a){return a.trim()}).filter(function(a){return 0<
a.length});if(1===a.length)return a[0];break}a=a.previousSibling||a.parentElement}}];return function(c){for(var b=0;b<a.length;++b){var d=a[b](c);if(d)return d.trim()}return""}}();return{getFavicon:function(a){for(var c=[],b=document.getElementsByTagName("link"),d=0,f=b.length;d<f;++d){var g=b[d],e=g.getAttribute("rel");e&&-1<e.indexOf("icon")&&(g=g.getAttribute("href"),"svg"!==g.substring(g.length-3)&&c.push(g))}c.push(document.location.origin+"/favicon.ico");var h=0,k=function(b){b?a(b):h>c.length-
1?bg.LPPlatform.getFavicon({url:document.location.href,callback:a}):m(c[h++],k)};k()},findText:function(a){var c=k(a),c=c?c.match:null;a.callback&&a.callback(c);return c},isUnloading:n,findTextNodes:k,isForm:l,getForm:function(a){for(;a;){if(l(a))return a;a=a.parentElement}return null},isClickable:function(a){if("function"===typeof document.elementFromPoint){a instanceof $&&(a=a.get(0));var c=a.getBoundingClientRect();return document.elementFromPoint(c.left+parseInt(c.width/2),c.top+parseInt(c.height/
2))===a}return!0},isVisible:function(a){a instanceof $||(a=$(a));if(!a.is(":visible"))return!1;for(var c=a.get(0).getBoundingClientRect(),b=a.get(0),d=a=0,f=window.innerWidth,g=window.innerHeight,b=b.parentElement;b;){0<b.scrollLeft&&(d-=b.scrollLeft);0<b.scrollTop&&(a-=b.scrollTop);var e;b.scrollWidth>b.clientWidth?(e=$(b).css("overflow-x"),e="auto"===e||"scroll"===e):e=void 0;e&&(f+=b.scrollWidth-b.clientWidth);a:{e=b;if(e.scrollHeight>e.clientHeight)switch($(e).css("overflow-y")){case "auto":case "scroll":e=
!0;break a;case "visible":e=e===document.body||!e.parentElement;break a}e=!1}e&&(g+=b.scrollHeight-b.clientHeight);b=b.parentElement}return!(c.right<d||c.bottom<a||c.left>d+f||c.top>a+g)},getLabel:p,getAttributes:function(a,c){for(var b={},d=0;d<c.length;++d){var f=a.getAttribute(c[d]);f&&(b[c[d]]=f)}return b},debounce:function(a,c,b){var d;return function(){var f=this,g=arguments,e=b&&!d;clearTimeout(d);d=setTimeout(function(){d=null;b||a.apply(f,g)},c);e&&a.apply(f,g)}}}}();
